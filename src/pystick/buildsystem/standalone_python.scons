Import("env")

env = env.Clone()
env.Append(CPPDEFINES='Py_BUILD_CORE')

# This line, although it looks silly it actaully causes SCons to create all object files under our BUILD_PATH/python:
# TODO merge this for several sconscripts that need it (see libpython.scons for example).
env.VariantDir("python", "#python", duplicate=False)

python_o = [env.Object('python/Modules/python.c')]

if env['PLATFORM'] == 'win32':
    python_o.append(env.SharedObject('python/PC/dl_nt.c'))

Return("python_o")